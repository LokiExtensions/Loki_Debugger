<?php
declare(strict_types=1);

use Loki\Components\Factory\ViewModelFactory;
use Loki\Components\Util\Block\ChildRenderer;
use Loki\Components\Util\IdConvertor;
use Loki\CssUtils\Util\CssClass;
use Loki\Debugger\Component\Debugger\DebuggerViewModel;
use Magento\Framework\Escaper;
use Magento\Framework\View\Element\Template;

/** @version 1.0.11 */
/** @var Template $block */
/** @var ViewModelFactory $viewModelFactory */
/** @var DebuggerViewModel $viewModel */
/** @var IdConvertor $idConvertor */
/** @var CssClass $css */
/** @var Escaper $escaper */
/** @var ChildRenderer $childRenderer */

$idConvertor = $viewModelFactory->create(IdConvertor::class);
$htmlId = $idConvertor->toElementId($block->getNameInLayout());
?>
<div class="<?= $escaper->escapeHtml($css('')) ?>">
    <button class="fixed bottom-0 right-0 bg-orange-500 text-white p-4 z-20" @click="toggleVisibility">
        <span role="tab">
            <?= __('Loki Debugger') ?>
        </span>
    </button>

    <div x-show="visible" x-cloak class="<?= $escaper->escapeHtml($css('fixed bottom-0 left-0 right-0 h-64 md:block w-full border-t border-orange-500 bg-orange-50', 'tabs')) ?>" x-ref="toolbar">
        <div class="absolute top-0 left-0 right-0" style="height:10px; cursor: ns-resize" x-ref="resizer"></div>

        <div class="<?= $escaper->escapeHtml($css('flex items-stretch overflow-x-auto px-2 pt-2 bg-orange-500', 'td')) ?>" role="tablist">
            <?= $childRenderer->all($block, 'loki-debugger.debugger.tab-button.') ?>
        </div>

        <div style="overflow:auto">
            <?= $childRenderer->all($block, 'loki-debugger.debugger.tab.') ?>
        </div>
    </div>
</div>
